spring:
  application:
    name: finance-backend

  profiles:
    active: ${SPRING_PROFILES_ACTIVE:local}

  data:
    mongodb:
      uri: ${MONGODB_URI:mongodb://localhost:27017/finance}

    redis:
      host: ${REDIS_HOST:localhost}
      port: 6379
      ssl:
        enabled: ${REDIS_SSL_ENABLED:false}
      timeout: 2000ms
      lettuce:
        pool:
          max-active: 10
          max-idle: 5
          min-idle: 2

  servlet:
    multipart:
      max-file-size: 1GB
      max-request-size: 1GB

aws:
  region: ap-northeast-2
  s3:
    excel-bucket: finance-excel-uploads
    frontend-bucket: finance-frontend
  sqs:
    excel-queue-url: https://sqs.ap-northeast-2.amazonaws.com/${AWS_ACCOUNT_ID:123456789012}/finance-excel-processing-queue
    excel-dlq-url: https://sqs.ap-northeast-2.amazonaws.com/${AWS_ACCOUNT_ID:123456789012}/finance-excel-processing-dlq

logging:
  level:
    root: INFO
    com.example.finance: DEBUG
    org.springframework.data.mongodb: DEBUG
    org.springframework.data.redis: DEBUG

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always
  health:
    mongo:
      enabled: true
    redis:
      enabled: true

---
# 로컬 개발 프로파일
spring:
  config:
    activate:
      on-profile: local

  data:
    mongodb:
      uri: mongodb://localhost:27017/finance

    redis:
      host: localhost
      port: 6379
      ssl:
        enabled: false

---


# AWS 프로덕션 프로파일
spring:
  config:
    activate:
      on-profile: prod
  data:
    mongodb:
      #uri: mongodb://admin:admin240401!@finance-docdb-cluster.cluster-c1ue6aayyxjn.ap-northeast-2.docdb.amazonaws.com:27017/finance?tls=false&replicaSet=rs0&retryWrites=false&connectTimeoutMS=60000&socketTimeoutMS=60000&serverSelectionTimeoutMS=60000
      # 데이터베이스 이름 제거 (/finance 삭제)
      uri: mongodb://dmillion:admin240401!@finance-docdb-cluster2.cluster-c1ue6aayyxjn.ap-northeast-2.docdb.amazonaws.com:27017/?tls=false&authSource=admin&replicaSet=rs0&retryWrites=false&connectTimeoutMS=60000&socketTimeoutMS=60000&serverSelectionTimeoutMS=60000
      #uri: mongodb://dmillion:admin240401!@finance-docdb-cluster.cluster-c1ue6aayyxjn.ap-northeast-2.docdb.amazonaws.com:27017/?tls=true&tlsCAFile=/app/global-bundle.pem&authSource=admin&replicaSet=rs0&retryWrites=false&connectTimeoutMS=30000&socketTimeoutMS=30000&serverSelectionTimeoutMS=60000
      # 데이터베이스 이름 별도 설정

      database: finance

    redis:
      host: finance-redis2-1kdayr.serverless.apn2.cache.amazonaws.com
      port: 6379
      ssl:
        enabled: true
      timeout: 5000ms